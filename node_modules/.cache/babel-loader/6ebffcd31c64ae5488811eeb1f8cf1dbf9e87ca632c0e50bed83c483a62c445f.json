{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\AMAN MAURYA\\\\OneDrive\\\\Desktop\\\\now\\\\src\\\\pages\\\\Booking.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Card from '../components/common/Card';\nimport GlobalHeader from '../components/common/GlobalHeader';\nimport GlobalFooter from '../components/common/GlobalFooter';\nimport { TIME_SLOTS } from '../constants';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Booking = () => {\n  _s();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    therapy: '',\n    practitioner: '',\n    date: '',\n    timeSlot: '',\n    notes: ''\n  });\n  const [selectedPractitioner, setSelectedPractitioner] = useState(null);\n  const [practitioners, setPractitioners] = useState([]);\n  const [therapies, setTherapies] = useState([]);\n  const [availableSlots, setAvailableSlots] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    fetchPractitioners();\n    fetchTherapies();\n  }, []);\n  useEffect(() => {\n    if (formData.practitioner && formData.date) {\n      fetchAvailableSlots();\n    }\n  }, [formData.practitioner, formData.date]);\n  const fetchPractitioners = async () => {\n    try {\n      var _response$data$data;\n      const response = await api.get('/practitioners');\n      console.log('Practitioners response:', response.data);\n\n      // Handle different response structures - practitioners API returns array directly\n      const practitionersData = ((_response$data$data = response.data.data) === null || _response$data$data === void 0 ? void 0 : _response$data$data.practitioners) || response.data || [];\n      setPractitioners(practitionersData);\n    } catch (error) {\n      console.error('Error fetching practitioners:', error);\n      // Set default practitioners if API fails\n      setPractitioners([{\n        _id: '1',\n        name: 'Dr. Priya Sharma',\n        specialization: 'Panchakarma Specialist',\n        experience: '15 years',\n        consultationFee: 1500\n      }]);\n    }\n  };\n  const fetchTherapies = async () => {\n    try {\n      var _response$data$data2;\n      const response = await api.get('/therapies');\n      console.log('Therapies response:', response.data);\n\n      // Handle different response structures\n      const therapiesData = ((_response$data$data2 = response.data.data) === null || _response$data$data2 === void 0 ? void 0 : _response$data$data2.therapies) || response.data.therapies || response.data || [];\n      setTherapies(therapiesData);\n    } catch (error) {\n      console.error('Error fetching therapies:', error);\n      // Set default therapies if API fails\n      setTherapies([{\n        name: 'Abhyanga',\n        price: 2500,\n        description: 'Full body oil massage'\n      }, {\n        name: 'Shirodhara',\n        price: 3000,\n        description: 'Oil pouring therapy'\n      }, {\n        name: 'Panchakarma',\n        price: 5000,\n        description: 'Complete detox program'\n      }]);\n    }\n  };\n  const fetchAvailableSlots = async () => {\n    try {\n      const response = await api.get(`/practitioners/available-slots?practitionerId=${formData.practitioner}&date=${formData.date}`);\n      setAvailableSlots(response.data.data.availableSlots);\n    } catch (error) {\n      console.error('Error fetching available slots:', error);\n      setAvailableSlots(TIME_SLOTS); // Fallback to all slots\n    }\n  };\n  const calculatePrice = () => {\n    var _therapy$durations, _therapy$durations$;\n    const therapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n    return therapy ? ((_therapy$durations = therapy.durations) === null || _therapy$durations === void 0 ? void 0 : (_therapy$durations$ = _therapy$durations[0]) === null || _therapy$durations$ === void 0 ? void 0 : _therapy$durations$.price) || therapy.price || 0 : 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      var _selectedTherapy$dura, _selectedTherapy$dura2;\n      const appointmentData = {\n        practitioner: formData.practitioner,\n        therapy: formData.therapy,\n        date: formData.date,\n        timeSlot: formData.timeSlot,\n        notes: formData.notes\n      };\n      const selectedTherapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n      const bookingData = {\n        practitioner: formData.practitioner,\n        therapyType: formData.therapy,\n        date: formData.date,\n        time: formData.timeSlot,\n        duration: (selectedTherapy === null || selectedTherapy === void 0 ? void 0 : (_selectedTherapy$dura = selectedTherapy.durations) === null || _selectedTherapy$dura === void 0 ? void 0 : (_selectedTherapy$dura2 = _selectedTherapy$dura[0]) === null || _selectedTherapy$dura2 === void 0 ? void 0 : _selectedTherapy$dura2.minutes) || (selectedTherapy === null || selectedTherapy === void 0 ? void 0 : selectedTherapy.duration) || 60,\n        price: calculatePrice(),\n        notes: formData.notes\n      };\n      await api.post('/bookings', bookingData);\n      alert('Booking created successfully! The practitioner will be notified.');\n\n      // Trigger immediate refresh for real-time updates\n      window.dispatchEvent(new Event('bookingCreated'));\n      navigate('/patient');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Booking failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const isSlotAvailable = time => {\n    return Math.random() > 0.3;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(GlobalHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Book Your Therapy Session\",\n        className: \"animate-slide-up\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Therapy Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"therapy\",\n              value: formData.therapy,\n              onChange: handleChange,\n              required: true,\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Therapy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this), therapies.length > 0 ? therapies.map(therapy => {\n                var _therapy$durations2, _therapy$durations2$;\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: therapy.name,\n                  children: [therapy.name, \" - \\u20B9\", ((_therapy$durations2 = therapy.durations) === null || _therapy$durations2 === void 0 ? void 0 : (_therapy$durations2$ = _therapy$durations2[0]) === null || _therapy$durations2$ === void 0 ? void 0 : _therapy$durations2$.price) || therapy.price || 'Price not set']\n                }, therapy._id || therapy.name, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this);\n              }) : /*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: true,\n                children: \"Loading therapies...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), formData.therapy && ((_therapy$durations3, _therapy$durations3$) => {\n              const therapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n              return therapy ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2 p-3 bg-ayur-light rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-ayur-primary font-medium\",\n                  children: therapy.description || 'Traditional Ayurvedic therapy'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-600 mt-1\",\n                  children: [\"Duration: \", ((_therapy$durations3 = therapy.durations) === null || _therapy$durations3 === void 0 ? void 0 : (_therapy$durations3$ = _therapy$durations3[0]) === null || _therapy$durations3$ === void 0 ? void 0 : _therapy$durations3$.minutes) || therapy.duration || 60, \" minutes | Category: \", therapy.category || 'Ayurveda']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this) : null;\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Preferred Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"date\",\n              value: formData.date,\n              onChange: handleChange,\n              required: true,\n              min: new Date().toISOString().split('T')[0],\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-4\",\n              children: \"Select Practitioner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-2 lg:grid-cols-3 gap-4\",\n              children: practitioners.length > 0 ? practitioners.map(practitioner => {\n                var _practitioner$stats, _practitioner$stats2, _practitioner$stats3;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => {\n                    setFormData({\n                      ...formData,\n                      practitioner: practitioner._id\n                    });\n                    setSelectedPractitioner(practitioner);\n                  },\n                  className: `p-4 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${formData.practitioner === practitioner._id ? 'border-ayur-primary bg-ayur-light shadow-md' : 'border-gray-200 hover:border-ayur-accent hover:shadow-sm'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-4xl mb-2\",\n                      children: \"\\uD83D\\uDC68\\u2695\\uFE0F\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"font-semibold text-ayur-primary\",\n                      children: practitioner.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-600\",\n                      children: \"Ayurveda Specialist\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Experience:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 226,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: \"10+ years\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Fee:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: \"\\u20B91500\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 231,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Rating:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 234,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: [((_practitioner$stats = practitioner.stats) === null || _practitioner$stats === void 0 ? void 0 : _practitioner$stats.avgRating) > 0 ? practitioner.stats.avgRating.toFixed(1) : 'New', \" \", ((_practitioner$stats2 = practitioner.stats) === null || _practitioner$stats2 === void 0 ? void 0 : _practitioner$stats2.avgRating) > 0 ? '‚≠ê' : 'üÜï']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 235,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 233,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Patients:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 238,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: ((_practitioner$stats3 = practitioner.stats) === null || _practitioner$stats3 === void 0 ? void 0 : _practitioner$stats3.appointmentCount) || 0\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500 mt-2\",\n                    children: \"BAMS, MD (Ayurveda)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 21\n                  }, this)]\n                }, practitioner._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this);\n              }) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-full text-center py-8 text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-4xl mb-2\",\n                  children: \"\\uD83D\\uDC68\\u2695\\uFE0F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Loading practitioners...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Available Time Slots\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\",\n              children: (availableSlots.length > 0 ? availableSlots : TIME_SLOTS).map(time => {\n                const available = availableSlots.includes(time) || availableSlots.length === 0;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => available && setFormData({\n                    ...formData,\n                    timeSlot: time\n                  }),\n                  disabled: !available || !selectedPractitioner,\n                  className: `p-3 rounded-lg border text-sm font-medium ${formData.timeSlot === time ? 'bg-ayur-primary text-white border-ayur-primary' : available && selectedPractitioner ? 'bg-white text-ayur-primary border-ayur-primary hover:bg-ayur-light' : 'bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed'}`,\n                  children: [time, !available && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs\",\n                    children: \"Booked\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 38\n                  }, this)]\n                }, time, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), !selectedPractitioner && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500 mt-2\",\n              children: \"Please select a practitioner first\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Additional Notes (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"notes\",\n              value: formData.notes,\n              onChange: handleChange,\n              rows: \"3\",\n              placeholder: \"Any specific requirements or health conditions to mention...\",\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent resize-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full bg-ayur-primary hover:bg-ayur-secondary text-white py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\",\n            disabled: loading || !formData.therapy || !formData.practitioner || !formData.date || !formData.timeSlot,\n            children: loading ? 'Booking...' : `Book Session - ‚Çπ${calculatePrice()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GlobalFooter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n_s(Booking, \"UT9ESkaXLa3X1sHcRlnW/b3ZFJY=\", false, function () {\n  return [useNavigate];\n});\n_c = Booking;\nexport default Booking;\nvar _c;\n$RefreshReg$(_c, \"Booking\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Card","GlobalHeader","GlobalFooter","TIME_SLOTS","api","jsxDEV","_jsxDEV","Booking","_s","navigate","formData","setFormData","therapy","practitioner","date","timeSlot","notes","selectedPractitioner","setSelectedPractitioner","practitioners","setPractitioners","therapies","setTherapies","availableSlots","setAvailableSlots","loading","setLoading","fetchPractitioners","fetchTherapies","fetchAvailableSlots","_response$data$data","response","get","console","log","data","practitionersData","error","_id","name","specialization","experience","consultationFee","_response$data$data2","therapiesData","price","description","calculatePrice","_therapy$durations","_therapy$durations$","find","t","durations","handleSubmit","e","preventDefault","_selectedTherapy$dura","_selectedTherapy$dura2","appointmentData","selectedTherapy","bookingData","therapyType","time","duration","minutes","post","alert","window","dispatchEvent","Event","_error$response","_error$response$data","message","handleChange","target","value","isSlotAvailable","Math","random","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","onSubmit","onChange","required","length","map","_therapy$durations2","_therapy$durations2$","disabled","_therapy$durations3","_therapy$durations3$","category","type","min","Date","toISOString","split","_practitioner$stats","_practitioner$stats2","_practitioner$stats3","onClick","stats","avgRating","toFixed","appointmentCount","available","includes","rows","placeholder","_c","$RefreshReg$"],"sources":["c:/Users/AMAN MAURYA/OneDrive/Desktop/now/src/pages/Booking.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Card from '../components/common/Card';\nimport GlobalHeader from '../components/common/GlobalHeader';\nimport GlobalFooter from '../components/common/GlobalFooter';\nimport { TIME_SLOTS } from '../constants';\nimport api from '../services/api';\n\nconst Booking = () => {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    therapy: '',\n    practitioner: '',\n    date: '',\n    timeSlot: '',\n    notes: ''\n  });\n  const [selectedPractitioner, setSelectedPractitioner] = useState(null);\n  const [practitioners, setPractitioners] = useState([]);\n  const [therapies, setTherapies] = useState([]);\n  const [availableSlots, setAvailableSlots] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchPractitioners();\n    fetchTherapies();\n  }, []);\n\n  useEffect(() => {\n    if (formData.practitioner && formData.date) {\n      fetchAvailableSlots();\n    }\n  }, [formData.practitioner, formData.date]);\n\n  const fetchPractitioners = async () => {\n    try {\n      const response = await api.get('/practitioners');\n      console.log('Practitioners response:', response.data);\n      \n      // Handle different response structures - practitioners API returns array directly\n      const practitionersData = response.data.data?.practitioners || response.data || [];\n      setPractitioners(practitionersData);\n    } catch (error) {\n      console.error('Error fetching practitioners:', error);\n      // Set default practitioners if API fails\n      setPractitioners([\n        { \n          _id: '1', \n          name: 'Dr. Priya Sharma', \n          specialization: 'Panchakarma Specialist',\n          experience: '15 years',\n          consultationFee: 1500\n        }\n      ]);\n    }\n  };\n\n  const fetchTherapies = async () => {\n    try {\n      const response = await api.get('/therapies');\n      console.log('Therapies response:', response.data);\n      \n      // Handle different response structures\n      const therapiesData = response.data.data?.therapies || response.data.therapies || response.data || [];\n      setTherapies(therapiesData);\n    } catch (error) {\n      console.error('Error fetching therapies:', error);\n      // Set default therapies if API fails\n      setTherapies([\n        { name: 'Abhyanga', price: 2500, description: 'Full body oil massage' },\n        { name: 'Shirodhara', price: 3000, description: 'Oil pouring therapy' },\n        { name: 'Panchakarma', price: 5000, description: 'Complete detox program' }\n      ]);\n    }\n  };\n\n  const fetchAvailableSlots = async () => {\n    try {\n      const response = await api.get(`/practitioners/available-slots?practitionerId=${formData.practitioner}&date=${formData.date}`);\n      setAvailableSlots(response.data.data.availableSlots);\n    } catch (error) {\n      console.error('Error fetching available slots:', error);\n      setAvailableSlots(TIME_SLOTS); // Fallback to all slots\n    }\n  };\n\n  const calculatePrice = () => {\n    const therapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n    return therapy ? (therapy.durations?.[0]?.price || therapy.price || 0) : 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      const appointmentData = {\n        practitioner: formData.practitioner,\n        therapy: formData.therapy,\n        date: formData.date,\n        timeSlot: formData.timeSlot,\n        notes: formData.notes\n      };\n\n      const selectedTherapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n      const bookingData = {\n        practitioner: formData.practitioner,\n        therapyType: formData.therapy,\n        date: formData.date,\n        time: formData.timeSlot,\n        duration: selectedTherapy?.durations?.[0]?.minutes || selectedTherapy?.duration || 60,\n        price: calculatePrice(),\n        notes: formData.notes\n      };\n\n      await api.post('/bookings', bookingData);\n      alert('Booking created successfully! The practitioner will be notified.');\n      \n      // Trigger immediate refresh for real-time updates\n      window.dispatchEvent(new Event('bookingCreated'));\n      \n      navigate('/patient');\n    } catch (error) {\n      alert(error.response?.data?.message || 'Booking failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const isSlotAvailable = (time) => {\n    return Math.random() > 0.3;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <GlobalHeader />\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n\n        \n        <Card title=\"Book Your Therapy Session\" className=\"animate-slide-up\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Therapy Type\n              </label>\n              <select\n                name=\"therapy\"\n                value={formData.therapy}\n                onChange={handleChange}\n                required\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent\"\n              >\n                <option value=\"\">Select Therapy</option>\n                {therapies.length > 0 ? therapies.map(therapy => (\n                  <option key={therapy._id || therapy.name} value={therapy.name}>\n                    {therapy.name} - ‚Çπ{therapy.durations?.[0]?.price || therapy.price || 'Price not set'}\n                  </option>\n                )) : (\n                  <option disabled>Loading therapies...</option>\n                )}\n              </select>\n              {formData.therapy && (() => {\n                const therapy = therapies.find(t => t.name === formData.therapy || t._id === formData.therapy);\n                return therapy ? (\n                  <div className=\"mt-2 p-3 bg-ayur-light rounded-lg\">\n                    <p className=\"text-sm text-ayur-primary font-medium\">\n                      {therapy.description || 'Traditional Ayurvedic therapy'}\n                    </p>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      Duration: {therapy.durations?.[0]?.minutes || therapy.duration || 60} minutes | \n                      Category: {therapy.category || 'Ayurveda'}\n                    </p>\n                  </div>\n                ) : null;\n              })()}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Preferred Date\n              </label>\n              <input\n                type=\"date\"\n                name=\"date\"\n                value={formData.date}\n                onChange={handleChange}\n                required\n                min={new Date().toISOString().split('T')[0]}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent\"\n              />\n            </div>\n\n            {/* Practitioner Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-4\">\n                Select Practitioner\n              </label>\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {practitioners.length > 0 ? practitioners.map(practitioner => (\n                  <div\n                    key={practitioner._id}\n                    onClick={() => {\n                      setFormData({...formData, practitioner: practitioner._id});\n                      setSelectedPractitioner(practitioner);\n                    }}\n                    className={`p-4 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${\n                      formData.practitioner === practitioner._id\n                        ? 'border-ayur-primary bg-ayur-light shadow-md'\n                        : 'border-gray-200 hover:border-ayur-accent hover:shadow-sm'\n                    }`}\n                  >\n                    <div className=\"text-center mb-3\">\n                      <div className=\"text-4xl mb-2\">üë®‚öïÔ∏è</div>\n                      <h4 className=\"font-semibold text-ayur-primary\">{practitioner.name}</h4>\n                      <p className=\"text-sm text-gray-600\">Ayurveda Specialist</p>\n                    </div>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Experience:</span>\n                        <span className=\"font-medium\">10+ years</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Fee:</span>\n                        <span className=\"font-medium\">‚Çπ1500</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Rating:</span>\n                        <span className=\"font-medium\">{practitioner.stats?.avgRating > 0 ? practitioner.stats.avgRating.toFixed(1) : 'New'} {practitioner.stats?.avgRating > 0 ? '‚≠ê' : 'üÜï'}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Patients:</span>\n                        <span className=\"font-medium\">{practitioner.stats?.appointmentCount || 0}</span>\n                      </div>\n                    </div>\n                    <p className=\"text-xs text-gray-500 mt-2\">BAMS, MD (Ayurveda)</p>\n                  </div>\n                )) : (\n                  <div className=\"col-span-full text-center py-8 text-gray-500\">\n                    <div className=\"text-4xl mb-2\">üë®‚öïÔ∏è</div>\n                    <p>Loading practitioners...</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Available Time Slots\n              </label>\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                {(availableSlots.length > 0 ? availableSlots : TIME_SLOTS).map(time => {\n                  const available = availableSlots.includes(time) || availableSlots.length === 0;\n                  return (\n                    <button\n                      key={time}\n                      type=\"button\"\n                      onClick={() => available && setFormData({...formData, timeSlot: time})}\n                      disabled={!available || !selectedPractitioner}\n                      className={`p-3 rounded-lg border text-sm font-medium ${\n                        formData.timeSlot === time\n                          ? 'bg-ayur-primary text-white border-ayur-primary'\n                          : available && selectedPractitioner\n                          ? 'bg-white text-ayur-primary border-ayur-primary hover:bg-ayur-light'\n                          : 'bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed'\n                      }`}\n                    >\n                      {time}\n                      {!available && <div className=\"text-xs\">Booked</div>}\n                    </button>\n                  );\n                })}\n              </div>\n              {!selectedPractitioner && (\n                <p className=\"text-sm text-gray-500 mt-2\">Please select a practitioner first</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Additional Notes (Optional)\n              </label>\n              <textarea\n                name=\"notes\"\n                value={formData.notes}\n                onChange={handleChange}\n                rows=\"3\"\n                placeholder=\"Any specific requirements or health conditions to mention...\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ayur-primary focus:border-transparent resize-none\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"w-full bg-ayur-primary hover:bg-ayur-secondary text-white py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\"\n              disabled={loading || !formData.therapy || !formData.practitioner || !formData.date || !formData.timeSlot}\n            >\n              {loading ? 'Booking...' : `Book Session - ‚Çπ${calculatePrice()}`}\n            </button>\n          </form>\n        </Card>\n      </div>\n      <GlobalFooter />\n    </div>\n  );\n};\n\nexport default Booking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}